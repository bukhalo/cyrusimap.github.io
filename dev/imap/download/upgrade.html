

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.3. Upgrading to 3.0 &mdash; Cyrus IMAP 3.1.7 (dev) documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/cyrus.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Cyrus IMAP 3.1.7 (dev) documentation" href="../../index.html"/>
        <link rel="up" title="4. Setup" href="../../setup.html"/>
        <link rel="next" title="4.4. Configuration Guide" href="../concepts/deployment.html"/>
        <link rel="prev" title="4.2.2.2. Virus Scanner" href="installation/virus.html"/> 

  
  
  

</head>

<body class="wy-body-for-nav" role="document">


  

<div class="pageheader">
  <ul>
    <li><a href="../../index.html">Home</a></li>
    <li><a href="../../download.html">Download</a></li>
    <li><a href="../../contribute.html">Contribute</a></li>
    <li><a href="../../support.html">Support</a></li>
    <li><a href="http://www.cyrusimap.org/sasl">Cyrus SASL</a></li>
  </ul>
  <div>
    <a href="../../index.html">
      <img src="../../_static/logo.gif" alt="CYRUS" />
    </a>
  </div>
</div>
<div style="clear: both;"></div>


  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
 
          <a href="../../index.html">
 

  
          
          <img src="../../_static/logo.gif"  />
     
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption"><span class="caption-text">Cyrus IMAP</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">1. Download</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getcyrus.html">1.1. Get Cyrus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getcyrus.html#distribution-package">1.1.1. Distribution Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation/distributions/centos.html">1.1.1.1. CentOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation/distributions/debian.html">1.1.1.2. Debian</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation/distributions/fedora.html">1.1.1.3. Fedora</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation/distributions/opensuse.html">1.1.1.4. openSUSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation/distributions/rhel.html">1.1.1.5. Red Hat Enterprise Linux</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation/distributions/ubuntu.html">1.1.1.6. Ubuntu</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="getcyrus.html#build-and-install-yourself">1.1.2. Build and Install Yourself</a><ul>
<li class="toctree-l4"><a class="reference internal" href="getcyrus.html#use-a-release-packaged-tarball">1.1.2.1. Use a release packaged tarball</a></li>
<li class="toctree-l4"><a class="reference internal" href="getcyrus.html#use-the-source-from-git">1.1.2.2. Use the source from Git</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="getcyrus.html#external-tools">1.1.3. External Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="getcyrus.html#licensing">1.1.4. Licensing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-notes/index.html">1.2. Release Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-notes/index.html#stable-version">1.2.1. Stable Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="release-notes/index.html#development-version">1.2.2. Development Version</a></li>
<li class="toctree-l3"><a class="reference internal" href="release-notes/index.html#supported-product-series">1.2.3. Supported Product Series</a><ul>
<li class="toctree-l4"><a class="reference internal" href="release-notes/index.html#series-3-0">1.2.3.2. Series 3.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes/index.html#series-2-5">1.2.3.3. Series 2.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes/index.html#series-2-4">1.2.3.4. Series 2.4</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="release-notes/index.html#older-versions">1.2.4. Older Versions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="release-notes/index.html#series-1">1.2.4.1. Series 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="release-notes/index.html#series-2-2-0-2-3">1.2.4.2. Series 2: 2.0 - 2.3</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="packagers.html">1.3. Notes for Packagers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="packagers.html#binary-naming">1.3.1. Binary naming</a></li>
<li class="toctree-l3"><a class="reference internal" href="packagers.html#sample-configuration-files">1.3.2. Sample configuration files</a></li>
<li class="toctree-l3"><a class="reference internal" href="packagers.html#predefined-configurations">1.3.3. Predefined configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="packagers.html#the-configuration-file-for-master-cyrus-conf">1.3.3.1. The configuration file for master: cyrus.conf</a></li>
<li class="toctree-l4"><a class="reference internal" href="packagers.html#the-configuration-file-for-the-various-programs-imapd-conf">1.3.3.2. The configuration file for the various programs: imapd.conf</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="packagers.html#services-in-etc-services">1.3.4. Services in <code class="docutils literal"><span class="pre">/etc/services</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">2. Quickstart Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart/introduction.html">2.1. Introduction to Cyrus IMAP</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../quickstart/introduction.html#what-is-imap">2.1.1. What is IMAP?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../quickstart.html#quick-install">2.2. Quick install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart.html#install-cyrus-reference-packages">2.2.1. 1. Install Cyrus reference packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart.html#use-apt-get-install-f-to-complete-installation">2.2.2. 2. Use &#8220;apt-get install -f&#8221; to complete installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart.html#setup-the-cyrus-mail-user-and-group">2.2.3. 3. Setup the cyrus:mail user and group</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart.html#setting-up-authentication-with-sasl">2.2.4. 4. Setting up authentication with SASL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart.html#setup-mail-delivery-from-your-mta">2.2.5. 5. Setup mail delivery from your MTA</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../quickstart.html#install-sendmail">2.2.5.1. Install Sendmail</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../quickstart.html#sendmail-communication">2.2.5.2. Sendmail communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../quickstart.html#install-postfix">2.2.5.3. Install Postfix</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart.html#protocol-ports">2.2.6. 6. Protocol ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart.html#configuring-cyrus">2.2.7. 7. Configuring Cyrus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart.html#launch-cyrus">2.2.8. 8. Launch Cyrus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../quickstart.html#feature-overview">2.2.9. Feature overview</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">3. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/features.html">3.1. Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/features.html#security-and-authentication">3.1.1. Security and Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/authentication-kerberos.html">3.1.1.1. Kerberos Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/authentication-ldap.html">3.1.1.2. LDAP Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/authentication-sql.html">3.1.1.3. SQL Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/access-control.html">3.1.1.4. Access Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/sealed-system.html">3.1.1.5. Sealed System Design</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/features.html#mailbox-management">3.1.2. Mailbox Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/automatic-creation-of-mailboxes.html">3.1.2.1. Automatic Creation of Mailboxes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/namespaces.html">3.1.2.2. Mailbox Namespaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/virtual-domains.html">3.1.2.3. Virtual Domains</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/mailbox-annotations.html">3.1.2.4. Mailbox Annotations (METADATA)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/mailbox-distribution.html">3.1.2.5. Mailbox Distribution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/features.html#message-management">3.1.3. Message Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/delayed-delete.html">3.1.3.1. Delayed Delete</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/delayed-expunge.html">3.1.3.2. Delayed Expunge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/message-annotations.html">3.1.3.3. Message Annotations (METADATA)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/duplicate-message-delivery-suppression.html">3.1.3.4. Duplicate Message Delivery Suppression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/shared-seen-state.html">3.1.3.5. Shared Seen State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/server-side-filtering.html">3.1.3.6. Server Side Filtering (Sieve)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/event-notifications.html">3.1.3.7. Event Notifications</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/features.html#calendar-and-contact-dav-collection-management">3.1.4. Calendar and Contact (DAV) Collection Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/caldav-collections.html">3.1.4.1. CalDAV Collections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/dav-components.html">3.1.4.2. DAV Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/dav-collection-mgmt.html">3.1.4.3. DAV Collection Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/carddav.html">3.1.4.4. CardDAV Support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/features.html#storage">3.1.5. Storage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/mail-spool-partitions.html">3.1.5.1. Mail Spool Partitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/mailbox-metadata-partitions.html">3.1.5.2. Mailbox Metadata Partitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/archiving.html">3.1.5.3. Archiving</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/quota.html">3.1.5.4. Quota</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/single-instance-store.html">3.1.5.5. Single-Instance Store</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/features.html#load-management">3.1.6. Load Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/features/server-aggregation.html">3.1.6.1. Cyrus IMAP Murder (Server Aggregation)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/overview_and_concepts.html">3.2. Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#access-control-lists">3.2.1. Access Control Lists</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#working-with-acls">3.2.1.1. Working with ACLs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#sample-acl">3.2.1.2. Sample ACL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#access-rights">3.2.1.3. Access Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#access-control-defaults">3.2.1.4. Access Control Defaults</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#access-control-identifier-aci">3.2.1.5. Access Control Identifier (ACI)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#negative-rights">3.2.1.6. Negative Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#calculating-a-users-rights">3.2.1.7. Calculating a Users&#8217; Rights</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#login-authentication">3.2.2. Login Authentication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#anonymous-login">3.2.2.1. Anonymous Login</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#plaintext-authentication">3.2.2.2. Plaintext Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#kerberos-logins">3.2.2.3. Kerberos Logins</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#shared-secrets-logins">3.2.2.4. Shared Secrets Logins</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#quotas">3.2.3. Quotas</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#working-with-quotas">3.2.3.1. Working with Quotas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#monitor-and-repair">3.2.3.2. Monitor and Repair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#supported-quota-types">3.2.3.3. Supported Quota Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#quota-roots">3.2.3.4. Quota Roots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#controlling-quota-behavior">3.2.3.5. Controlling Quota Behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#mail-delivery-behavior">3.2.3.6. Mail Delivery Behavior</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#quota-warnings-upon-select-when-user-has-d-rights">3.2.3.7. Quota Warnings Upon Select When User Has <code class="docutils literal"><span class="pre">d</span></code> Rights</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#quotas-and-partitions">3.2.3.8. Quotas and Partitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#new-mail-notification">3.2.4. New Mail Notification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#partitions">3.2.5. Partitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#specifying-partitions-with-create">3.2.5.1. Specifying Partitions with &#8220;create&#8221;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#changing-partitions-with-rename">3.2.5.2. Changing Partitions with &#8220;rename&#8221;</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#news">3.2.6. News</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#pop3-server">3.2.7. POP3 Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#the-syslog-facility">3.2.8. The syslog facility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#mail-directory-recovery">3.2.9. Mail Directory Recovery</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#reconstructing-mailbox-directories">3.2.9.1. Reconstructing Mailbox Directories</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#reconstructing-the-mailboxes-file">3.2.9.2. Reconstructing the Mailboxes File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#reconstructing-quota-roots">3.2.9.3. Reconstructing Quota Roots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#removing-quota-roots">3.2.9.4. Removing Quota Roots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#subscriptions">3.2.9.5. Subscriptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#configuration-directory">3.2.10. Configuration Directory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#log-directory">3.2.10.1. Log Directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#proc-directory">3.2.10.2. Proc Directory</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#message-delivery">3.2.11. Message Delivery</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#local-mail-transfer-protocol-lmtp">3.2.11.1. Local Mail Transfer Protocol (lmtp)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#single-instance-store">3.2.11.2. Single Instance Store</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/overview_and_concepts.html#duplicate-delivery-suppression">3.2.11.3. Duplicate Delivery Suppression</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#sieve-a-mail-filtering-language">3.2.12. Sieve, a Mail Filtering Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/overview_and_concepts.html#cyrus-murder-the-imap-aggregator">3.2.13. Cyrus Murder, the IMAP Aggregator</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../setup.html">4. Setup</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../developer/compiling.html">4.1. Compiling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/compiling.html#setting-up-dependencies">4.1.1. Setting up dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/compiling.html#required-build-dependencies">4.1.1.1. Required Build Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/compiling.html#optional-build-dependencies">4.1.1.2. Optional Build Dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/compiling.html#compile-cyrus">4.1.2. Compile Cyrus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/compiling.html#default-build-mail-only">4.1.2.1. Default build: mail only</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/compiling.html#optional-dependencies">4.1.2.2. Optional dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/compiling.html#compile">4.1.2.3. Compile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/compiling.html#check">4.1.2.4. Check</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installing.html">4.2. Installing Cyrus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installing.html#install-cyrus">4.2.1. Install Cyrus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installing.html#optional-components">4.2.2. Optional Components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation/manage-dav.html">4.2.2.1. HTTP modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation/virus.html">4.2.2.2. Virus Scanner</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../installing.html#setting-up-syslog">4.2.3. Setting up syslog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installing.html#create-cyrus-environment">4.2.4. Create Cyrus environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../installing.html#set-up-the-cyrus-mail-user-and-group">4.2.4.1. Set up the cyrus:mail user and group</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installing.html#authentication-with-sasl">4.2.4.2. Authentication with SASL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installing.html#mail-delivery-from-your-mta">4.2.4.3. Mail delivery from your MTA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installing.html#protocol-ports">4.2.4.4. Protocol ports</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installing.html#cyrus-config-files">4.2.4.5. Cyrus config files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installing.html#optional-setting-up-ssl-certificates">4.2.4.6. Optional: Setting up SSL certificates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installing.html#prepare-ephemeral-run-time-storage-directories">4.2.4.7. Prepare ephemeral (run-time) storage directories</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../installing.html#launch-cyrus">4.2.5. Launch Cyrus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installing.html#send-a-test-email">4.2.6. Send a test email</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installing.html#checking-carddav-and-carddav">4.2.7. Checking CardDAV and CardDAV</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installing.html#troubleshooting">4.2.8. Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.3. Upgrading to 3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#preparation">4.3.1. 1. Preparation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installation-from-tarball">4.3.1.1. Installation from tarball</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-are-you-planning-on-upgrading">4.3.1.2. How are you planning on upgrading?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#do-what-as-who">4.3.1.3. Do What As Who?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#install-new-3-0-cyrus">4.3.2. 2. Install new 3.0 Cyrus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shut-down-existing-cyrus">4.3.3. 3. Shut down existing Cyrus</a></li>
<li class="toctree-l3"><a class="reference internal" href="#backup-and-copy-existing-data">4.3.4. 4. Backup and Copy existing data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#copy-config-files-and-update">4.3.5. 5. Copy config files and update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrade-specific-items">4.3.6. 6. Upgrade specific items</a></li>
<li class="toctree-l3"><a class="reference internal" href="#start-new-3-0-cyrus-and-verify">4.3.7. 7. Start new 3.0 Cyrus and verify</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reconstruct-databases-and-cache">4.3.8. 8. Reconstruct databases and cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#do-you-want-any-new-features">4.3.9. 9. Do you want any new features?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrade-complete">4.3.10. 10. Upgrade complete</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-note-for-murder-configurations">4.3.11. Special note for Murder configurations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/deployment.html">4.4. Configuration Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/deployment_scenarios.html">4.4.1. Deployment Scenarios</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/deployment_scenarios.html#single-server-deployments">4.4.1.1. Single Server Deployments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/deployment_scenarios.html#multi-server-deployments">4.4.1.2. Multi Server Deployments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/deployment_scenarios.html#cyrus-murder-server-aggregation">4.4.2. Cyrus Murder: Server aggregation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/deployment_scenarios.html#the-discrete-murder">4.4.2.1. The Discrete Murder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/deployment_scenarios.html#the-unified-murder">4.4.2.2. The Unified Murder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/deployment_scenarios.html#the-shared-murder">4.4.2.3. The Shared Murder</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/deployment_scenarios.html#cyrus-replication">4.4.3. Cyrus Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/deployment_scenarios.html#hosted-environments">4.4.4. Hosted Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/databases.html">4.4.5. Databases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/databases.html#overview">4.4.5.1. Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/databases.html#file-list">4.4.5.2. File list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/databases.html#storage-types">4.4.5.3. Storage types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/mailbox_creation_distribution.html">4.4.6. Mailbox Creation Distribution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/mailbox_creation_distribution.html#selection-mode">4.4.6.1. Selection Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/mailbox_creation_distribution.html#special-cases">4.4.6.2. Special cases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/mailbox_creation_distribution.html#partitions-exclusion">4.4.6.3. Partitions Exclusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/mailbox_creation_distribution.html#partitions-usage-data-reset">4.4.6.4. Partitions Usage Data Reset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/mailbox_creation_distribution.html#mailbox-creation-distribution-through-murder-frontend">4.4.6.5. Mailbox Creation Distribution Through <code class="docutils literal"><span class="pre">murder</span> <span class="pre">frontend</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/mailbox_creation_distribution.html#backends-exclusion">4.4.6.6. Backends Exclusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/mailbox_creation_distribution.html#backends-usage-data-reset">4.4.6.7. Backends Usage Data Reset</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/known_protocol_limitations.html">4.4.7. Known Protocol Limitations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/known_protocol_limitations.html#pop3-and-mailbox-locking">4.4.7.1. POP3 and Mailbox Locking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/known_protocol_limitations.html#cyrus-imap-pop3-implementation">4.4.7.2. Cyrus IMAP POP3 Implementation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/authentication_and_authorization.html">4.4.8. Authentication and Authorization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/authentication_and_authorization.html#client-authentication">4.4.8.1. Client Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/authentication_and_authorization.html#users-and-mailboxes">4.4.8.2. Users and Mailboxes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/performance_recommendations.html">4.4.9. Performance Recommendations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/performance_recommendations.html#databases-on-temporary-filesystems">4.4.9.1. Databases on Temporary Filesystems</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/storage.html">4.4.10. Storage Considerations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/storage.html#general-notes-on-storage">4.4.10.1. General Notes on Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/storage.html#redundancy">4.4.10.2. Redundancy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/storage.html#availability">4.4.10.3. Availability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/storage.html#performance">4.4.10.4. Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/storage.html#scalability">4.4.10.5. Scalability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/storage.html#capacity">4.4.10.6. Capacity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/storage.html#cost">4.4.10.7. Cost</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../concepts/deployment/supported-platforms.html">4.4.11. Supported Platforms and System Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/supported-platforms.html#building-cyrus-imap">4.4.11.1. Building Cyrus IMAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/supported-platforms.html#required-software-components">4.4.11.2. Required Software Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/supported-platforms.html#recommended-software-components">4.4.11.3. Recommended Software Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../concepts/deployment/supported-platforms.html#recommended-software-components-enabled-by-default">4.4.11.4. Recommended Software Components Enabled by Default</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations.html">5. Operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/manpages/commands.html">5.1. Man pages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/manpages/commands.html#configuration-files">5.1.1. (5) Configuration Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/configs/cyrus.conf.html">5.1.1.1. <strong>cyrus.conf</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/configs/imapd.conf.html">5.1.1.2. <strong>imapd.conf</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/configs/krb.equiv.html">5.1.1.3. <strong>krb.equiv</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/manpages/commands.html#system-commands">5.1.2. (8) System Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/arbitron.html">5.1.2.1. <strong>arbitron</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/backupd.html">5.1.2.2. <strong>backupd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/chk_cyrus.html">5.1.2.3. <strong>chk_cyrus</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ctl_backups.html">5.1.2.4. <strong>ctl_backups</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ctl_conversationsdb.html">5.1.2.5. <strong>ctl_conversationsdb</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ctl_cyrusdb.html">5.1.2.6. <strong>ctl_cyrusdb</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ctl_deliver.html">5.1.2.7. <strong>ctl_deliver</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ctl_mboxlist.html">5.1.2.8. <strong>ctl_mboxlist</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ctl_zoneinfo.html">5.1.2.9. <strong>ctl_zoneinfo</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cvt_cyrusdb.html">5.1.2.10. <strong>cvt_cyrusdb</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cvt_xlist_specialuse.html">5.1.2.11. <strong>cvt_xlist_specialuse</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_backup.html">5.1.2.12. <strong>cyr_backup</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_buildinfo.html">5.1.2.13. <strong>cyr_buildinfo</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_dbtool.html">5.1.2.14. <strong>cyr_dbtool</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_deny.html">5.1.2.15. <strong>cyr_deny</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_df.html">5.1.2.16. <strong>cyr_df</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_expire.html">5.1.2.17. <strong>cyr_expire</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_info.html">5.1.2.18. <strong>cyr_info</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_sequence.html">5.1.2.19. <strong>cyr_sequence</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_synclog.html">5.1.2.20. <strong>cyr_synclog</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_userseen.html">5.1.2.21. <strong>cyr_userseen</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyr_virusscan.html">5.1.2.22. <strong>cyr_virusscan</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyradm.html">5.1.2.23. <strong>cyradm</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/cyrdump.html">5.1.2.24. <strong>cyrdump</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/deliver.html">5.1.2.25. <strong>deliver</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/fetchnews.html">5.1.2.26. <strong>fetchnews</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/fud.html">5.1.2.27. <strong>fud</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/httpd.html">5.1.2.28. <strong>httpd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/idled.html">5.1.2.29. <strong>idled</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/imapd.html">5.1.2.30. <strong>imapd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ipurge.html">5.1.2.31. <strong>ipurge</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/lmtpd.html">5.1.2.32. <strong>lmtpd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/lmtpproxyd.html">5.1.2.33. <strong>lmtpproxyd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/masssievec.html">5.1.2.34. <strong>masssievec</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/master.html">5.1.2.35. <strong>master</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/mbexamine.html">5.1.2.36. <strong>mbexamine</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/mbpath.html">5.1.2.37. <strong>mbpath</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/mbtool.html">5.1.2.38. <strong>mbtool</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/mkimap.html">5.1.2.39. <strong>mkimap</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/mknewsgroups.html">5.1.2.40. <strong>mknewsgroups</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/mupdate.html">5.1.2.41. <strong>mupdate</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/nntpd.html">5.1.2.42. <strong>nntpd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/notifyd.html">5.1.2.43. <strong>notifyd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/pop3d.html">5.1.2.44. <strong>pop3d</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/pop3proxyd.html">5.1.2.45. <strong>pop3proxyd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/proxyd.html">5.1.2.46. <strong>proxyd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ptdump.html">5.1.2.47. <strong>ptdump</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ptexpire.html">5.1.2.48. <strong>ptexpire</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/ptloader.html">5.1.2.49. <strong>ptloader</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/quota.html">5.1.2.50. <strong>quota</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/reconstruct.html">5.1.2.51. <strong>reconstruct</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/rehash.html">5.1.2.52. <strong>rehash</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/restore.html">5.1.2.53. <strong>restore</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/sievec.html">5.1.2.54. <strong>sievec</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/sieved.html">5.1.2.55. <strong>sieved</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/smmapd.html">5.1.2.56. <strong>smmapd</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/squatter.html">5.1.2.57. <strong>squatter</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/sync_client.html">5.1.2.58. <strong>sync_client</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/sync_reset.html">5.1.2.59. <strong>sync_reset</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/sync_server.html">5.1.2.60. <strong>sync_server</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/timsieved.html">5.1.2.61. <strong>timsieved</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/tls_prune.html">5.1.2.62. <strong>tls_prune</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/translatesieve.html">5.1.2.63. <strong>translatesieve</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/systemcommands/unexpunge.html">5.1.2.64. <strong>unexpunge</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/manpages/commands.html#user-commands">5.1.3. (1) User Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/arbitronsort.pl.html">5.1.3.1. <strong>arbitronsort.pl</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/dav_reconstruct.html">5.1.3.2. <strong>dav_reconstruct</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/httptest.html">5.1.3.3. <strong>httptest</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/imtest.html">5.1.3.4. <strong>imtest</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/installsieve.html">5.1.3.5. <strong>installsieve</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/lmtptest.html">5.1.3.6. <strong>lmtptest</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/mupdatetest.html">5.1.3.7. <strong>mupdatetest</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/nntptest.html">5.1.3.8. <strong>nntptest</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/pop3test.html">5.1.3.9. <strong>pop3test</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/sieveshell.html">5.1.3.10. <strong>sieveshell</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/sivtest.html">5.1.3.11. <strong>sivtest</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/smtptest.html">5.1.3.12. <strong>smtptest</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/manpages/usercommands/synctest.html">5.1.3.13. <strong>synctest</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/admin.html">5.2. Administrator Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/admin.html#architecture">5.2.1. Architecture</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/architecture.html">5.2.1.1. System Architecture</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/admin.html#management">5.2.2. Management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/locations.html">5.2.2.1. File &amp; Directory Locations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/ports-sockets.html">5.2.2.2. Ports and Sockets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/access-control.html">5.2.2.3. Access Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/quotas.html">5.2.2.4. Quotas</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/sieve.html">5.2.2.5. Cyrus Sieve</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/backups.html">5.2.2.6. Cyrus Backups</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/nntp.html">5.2.2.7. Cyrus NNTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/protlayer.html">5.2.2.8. Cyrus Prot Layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/sop.html">5.2.2.9. Standard Operating Procedures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/eventsource.html">5.2.2.10. Cyrus Event Source</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/monitoring.html">5.2.2.11. Monitoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/config-mailboxdistribution.html">5.2.2.12. Mailbox Distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/murder/murder.html">5.2.2.13. Cyrus Murder</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/nginx-proxy.html">5.2.2.14. HOWTO: Using an NGINX IMAP Proxy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/admin/tweaking.html">5.2.2.15. Tweaking Cyrus IMAP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/faq.html">5.3. Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/faq.html#features">5.3.1. Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/feature-database-backend.html">5.3.1.1. Which database backend should I use for which databases?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/feature-duplicate-delivery.html">5.3.1.2. Duplicate Delivery Suppression</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/faq.html#installation-problems">5.3.2. Installation Problems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/install-compilationerrors.html">5.3.2.1. Compilation errors about kssl.h and krb5.h on Red Hat Linux/Fedora</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/install-install-help.html">5.3.2.2. Help! There must be an easier way to get all this going...</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/install-linkerwarnings.html">5.3.2.3. OpenSSL Version Mismatches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/install-linkerwarnings.html#libical-v1-0-1-or-v2-0">5.3.2.4. Libical v1.0.1 or v2.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/faq.html#common-feature-requests">5.3.3. Common Feature Requests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/r-murder-ha.html">5.3.3.1. Does the Cyrus Murder support High Availability configurations?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/r-pop3-logging.html">5.3.3.2. Can I configure pop3d to log amount and size of messages fetched by user?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/r-publicssharedfolders.html">5.3.3.3. How can I make CyrusSieve work with public shared folders?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/r-subfolders.html">5.3.3.4. Can I have subfolders not appear under INBOX?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/faq.html#common-operational-questions">5.3.4. Common Operational Questions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-acls.html">5.3.4.1. How do I view ACLs on a mailbox?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-annotations.html">5.3.4.2. What annotations are available?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-configdir-tempfs.html">5.3.4.3. Is it safe to put &lt;configdirectory&gt;/proc and &lt;configdirectory&gt;/lock on a tmpfs filesystem?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-coredump.html">5.3.4.4. How to enable core dumps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-delete-mailbox.html">5.3.4.5. Why can I not delete a mailbox as an admin user?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-deleted-expired-expunged-purged.html">5.3.4.6. When is What ... Deleted, Expired, Expunged or Purged?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-deliverdb-size.html">5.3.4.7. Why is deliver.db so large?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-freezes.html">5.3.4.8. I have multiple imapd-SERVICES configured and experience occasional freezes when I try to log in!</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-gdb.html">5.3.4.9. How to run gdb on Cyrus components</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-mailbox-doesnotexist.html">5.3.4.10. Cyrus delivers claims that the mailbox does not exist</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-mixedcase.html">5.3.4.11. Why is mail being rejected with No Mailbox found due to MiXed CaSe incoming e-mail?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-otherdatabases.html">5.3.4.12. Can I use MySQL (or another SQL database) as the primary mail store?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-pop3slow.html">5.3.4.13. Why do POP3 connections take so long, but once the connection is established all is well?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-reconstruct.html">5.3.4.14. Why does reconstruct -m not work?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-sharedfilesystem-gpfs.html">5.3.4.15. Shared File Systems GPFS for high availability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-telemetry.html">5.3.4.16. How to enable telemetry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-toomanyprocesses.html">5.3.4.17. The process count keeps growing!</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-unable-join-environment.html">5.3.4.18. &#8220;unable to join environment&#8221; error</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/o-vacation-mailfrom.html">5.3.4.19. Why does Cyrus set the MAIL FROM address of the sender of vacation responses to &#8216;&lt;&gt;&#8217;?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/faq.html#common-interoperability-problems">5.3.5. Common Interoperability Problems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/interop-8bit.html">5.3.5.1. Why does Cyrus reject 8-bit characters in the headers of my messages?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/interop-barenewlines.html">5.3.5.2. Why does Cyrus reject messages with &#8220;bare newlines&#8221;?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/interop-sieve-exim.html">5.3.5.3. How do I get Cyrus Sieve to play nice with Exim?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/faqs/interop-slow-delivery.html">5.3.5.4. Why does mail delivery go slow or hang sometimes?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developers.html">6. Developers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contribute.html">6.1. We need your help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer/documentation.html">6.2. Contribute docs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/documentation.html#overview">6.2.1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/documentation.html#documentation-tools">6.2.2. Documentation Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/documentation.html#building-the-files">6.2.3. Building the files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/documentation.html#submitting-updates">6.2.4. Submitting updates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/documentation.html#using-github-pull-requests">6.2.4.1. Using GitHub pull requests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/documentation.html#patches-through-the-mailing-list">6.2.4.2. Patches through the mailing list</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/documentation.html#special-tags">6.2.5. Special Tags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/documentation.html#rfc">6.2.5.1. rfc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/documentation.html#cyrusman">6.2.5.2. cyrusman</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/documentation.html#imap-current-stable-version">6.2.5.3. imap_current_stable_version</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/documentation.html#conventions-man-pages">6.2.6. Conventions: Man Pages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/documentation.html#synopsis">6.2.6.1. Synopsis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/documentation.html#examples">6.2.6.2. Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer.html">6.3. Contribute code and tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer.html#getting-started">6.3.1. Getting Started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/process.html">6.3.1.1. Development Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/overview.html">6.3.1.2. Overview of Cyrus development environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/github-guide.html">6.3.1.3. GitHub guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/compiling.html">4.1. Compiling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../installing.html">4.2. Installing Cyrus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/developer-testing.html">6.3.1.4. Developer Test Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/jmap.html">6.3.1.5. JMAP support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer.html#system-files-and-databases">6.3.2. System files and Databases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/namespaces.html">6.3.2.1. Namespaces: a developer view</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer.html#resources">6.3.3. Resources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/libraries.html">6.3.3.1. Developer Libraries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer.html#releasing">6.3.4. Releasing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/releasing.html">6.3.4.1. Releasing Cyrus IMAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/ancient-releasing.html">6.3.4.2. Releasing new builds of ancient Cyrus IMAP versions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developer/cyrusworks.html">6.4. Cyrus.Works</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/cyrusworks.html#about-cyrus-works">6.4.1. About Cyrus Works</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/cyrusworks.html#testing">6.4.2. Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/cyrusworks.html#how-it-works">6.4.3. How it works</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developer/cyrusworks.html#adding-rules">6.4.4. Adding Rules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developers.html#cyrus-internals">6.5. Cyrus Internals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/API.html">6.5.1. Cyrus APIs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/API/cyrusdb.html">6.5.1.1. CyrusDB API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/API/cyrusdb2.html">6.5.1.2. cyrusdb API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/API/index-api.html">6.5.1.3. Index API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/API/mailbox-api.html">6.5.1.4. Mailbox API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/thoughts.html">6.5.2. Thoughts &amp; Notes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/thoughts/backup.html">6.5.2.1. Notes for backup implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/thoughts/bytecode.html">6.5.2.2. Cyrus IMAP Server: Sieve Bytecode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/thoughts/caldav_scheduling_flowchart.html">6.5.2.3. Cyrus CalDAV Scheduling Flowchart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/thoughts/improved_mboxlist_sort.html">6.5.2.4. Enabling improved_mboxlist_sort</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/thoughts/notes.html">6.5.2.5. Cyrus IMAP Server: Notes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/thoughts/prot-events.html">6.5.2.6. Cyrus IMAP Server: Prot Events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer/guidance.html">6.5.3. Guidance for Developers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/hacking.html">6.5.3.1. Cyrus IMAP Server: Hacking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/internationalization.html">6.5.3.2. Cyrus IMAP Server: Internationalization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/locking.html">6.5.3.3. Cyrus IMAP Server: Locking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/mailbox-format.html">6.5.3.4. Cyrus IMAP Server: Mailbox File Formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/namelocks.html">6.5.3.5. Cyrus IMAP Server: Namelocks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/prot.html">6.5.3.6. Cyrus IMAP Server: prot layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/replication_examples.html">6.5.3.7. Cyrus IMAP Server: Replication Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/replication_protocol.html">6.5.3.8. Cyrus IMAP Server: Replication Protocol v2.4+</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/special_chars.html">6.5.3.9. Cyrus IMAP Server: Special Characters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/guidance/var_directory_structure.html">6.5.3.10. Cyrus IMAP Server: var directory structure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developers.html#unit-tests">6.6. Unit Tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer/unit-tests.html">6.6.1. Unit Tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#table-of-contents">6.6.1.1. Table of Contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#introduction">6.6.1.2. 1. Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#what-is-a-unit-test">6.6.1.3. 2. What Is A Unit Test?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#running-the-tests">6.6.1.4. 3. Running The Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#debugging-a-test">6.6.1.5. 3.6 Debugging A Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#adding-your-own-tests">6.6.1.6. 4. Adding Your Own Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#where-to-put-your-tests">6.6.1.7. 4.1 Where To Put Your Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#adding-a-new-suite">6.6.1.8. 4.1 Adding A New Suite</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#adding-a-test-to-a-suite">6.6.1.9. 4.2 Adding A Test To A Suite</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer/unit-tests.html#suite-setup-and-teardown">6.6.1.10. 4.3 Suite Setup And Teardown</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">7. Support/Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/feedback-bugs.html">7.1. Found a bug?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/feedback-mailing-lists.html">7.2. Mailing lists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/feedback-mailing-lists.html#archives">7.2.1. Archives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/feedback-mailing-lists.html#subscribe-unsubscribe">7.2.2. Subscribe/Unsubscribe</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/feedback-mailing-lists.html#digest-lists">7.2.3. Digest Lists</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/feedback-irc.html">7.3. IRC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/feedback-meetings.html">7.4. Weekly meetings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview/about_cyrus.html">7.5. About</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../overview/what_is_cyrus.html">7.5.1. What is Cyrus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../overview/what_is_cyrus.html#what-is-cyrus">7.5.1.1. What is Cyrus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/what_is_cyrus.html#what-is-imap">7.5.1.2. What is IMAP?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/what_is_cyrus.html#imap-version-4-imap4">7.5.1.3. IMAP Version 4 (IMAP4)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/what_is_cyrus.html#mime">7.5.1.4. Mime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/what_is_cyrus.html#smtp">7.5.1.5. SMTP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../overview/who_is_cyrus.html">7.5.2. Who Is Cyrus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../overview/who_is_cyrus.html#core-contributors">7.5.2.1. Core Contributors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/who_is_cyrus.html#individual-contributors-and-past-contributors">7.5.2.2. Individual contributors and past contributors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../overview/cyrus_roadmap.html">7.5.3. Cyrus Roadmap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../overview/cyrus_roadmap.html#high-level-roadmap">7.5.3.1. High Level Roadmap</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../overview/cyrus_history.html">7.5.4. Cyrus History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../overview/cyrus_bylaws.html">7.5.5. Cyrus Bylaws</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../overview/cyrus_bylaws.html#i-the-cyrus-governance-board">7.5.5.1. I. The Cyrus Governance Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/cyrus_bylaws.html#ii-the-cyrus-core-developers-group">7.5.5.2. II. The Cyrus Core Developers Group</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/cyrus_bylaws.html#iii-the-release-engineer">7.5.5.3. III. The Release Engineer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/cyrus_bylaws.html#iv-the-cyrus-roadmap">7.5.5.4. IV. The Cyrus Roadmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/cyrus_bylaws.html#v-development-process">7.5.5.5. V. Development Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../overview/cyrus_bylaws.html#vi-changes-to-the-bylaws">7.5.5.6. VI. Changes to the Bylaws</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Cyrus SASL</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://www.cyrusimap.org/sasl">Cyrus SASL</a></li>
</ul>

          
        
      </div>
        
<div class="buildstatus">
    <a href="https://travis-ci.org/cyrusimap/cyrus-imapd" target="_blank">master: <img src="https://travis-ci.org/cyrusimap/cyrus-imapd.svg?branch=master"></a>
</div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Cyrus IMAP</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">

          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html">Docs v3.1.7 (dev)</a> &raquo;</li>
      
          <li><a href="../../setup.html">4. Setup</a> &raquo;</li>
      
    <li>4.3. Upgrading to 3.0</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/cyrusimap/cyrus-imapd/blob/master/docsrc/imap/download/upgrade.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="upgrading-to-3-0">
<span id="upgrade"></span><h1>4.3. Upgrading to 3.0<a class="headerlink" href="#upgrading-to-3-0" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This guide assumes that you are familiar and comfortable with administration of a
Cyrus installation, and system administration in general.</p>
<p class="last">It assumes you are installing from source or tarball. If you want to install from package,
use the upgrade instructions from the package provider.</p>
</div>
<div class="contents local topic" id="upgrading-an-overview">
<p class="topic-title first">Upgrading: an overview</p>
<ul class="simple">
<li><a class="reference internal" href="#preparation" id="id1">1. Preparation</a><ul>
<li><a class="reference internal" href="#installation-from-tarball" id="id2">Installation from tarball</a></li>
<li><a class="reference internal" href="#how-are-you-planning-on-upgrading" id="id3">How are you planning on upgrading?</a><ul>
<li><a class="reference internal" href="#upgrade-by-replicating" id="id4">Upgrade by replicating</a></li>
<li><a class="reference internal" href="#upgrade-in-place" id="id5">Upgrade in place</a></li>
</ul>
</li>
<li><a class="reference internal" href="#do-what-as-who" id="id6">Do What As Who?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#install-new-3-0-cyrus" id="id7">2. Install new 3.0 Cyrus</a></li>
<li><a class="reference internal" href="#shut-down-existing-cyrus" id="id8">3. Shut down existing Cyrus</a></li>
<li><a class="reference internal" href="#backup-and-copy-existing-data" id="id9">4. Backup and Copy existing data</a></li>
<li><a class="reference internal" href="#copy-config-files-and-update" id="id10">5. Copy config files and update</a></li>
<li><a class="reference internal" href="#upgrade-specific-items" id="id11">6. Upgrade specific items</a></li>
<li><a class="reference internal" href="#start-new-3-0-cyrus-and-verify" id="id12">7. Start new 3.0 Cyrus and verify</a></li>
<li><a class="reference internal" href="#reconstruct-databases-and-cache" id="id13">8. Reconstruct databases and cache</a></li>
<li><a class="reference internal" href="#do-you-want-any-new-features" id="id14">9. Do you want any new features?</a></li>
<li><a class="reference internal" href="#upgrade-complete" id="id15">10. Upgrade complete</a></li>
<li><a class="reference internal" href="#special-note-for-murder-configurations" id="id16">Special note for Murder configurations</a></li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For those upgrading from 2.3.X; newer releases of Cyrus IMAP will use
significantly more memory per selected mailbox.  This is not an error
or bug; it&#8217;s a feature.  The newer code is holding more data and
metadata in memory for purposes of faster access to more of the
mailbox.  This is not a memory leak.</p>
</div>
<div class="section" id="preparation">
<h2><a class="toc-backref" href="#id1">4.3.1. 1. Preparation</a><a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h2>
<p>Things to consider <strong>before</strong> you begin:</p>
<div class="section" id="installation-from-tarball">
<h3><a class="toc-backref" href="#id2">4.3.1.1. Installation from tarball</a><a class="headerlink" href="#installation-from-tarball" title="Permalink to this headline">¶</a></h3>
<p>You will need to install from our packaged tarball. We provide a full list of libraries that Debian requires, but we aren&#8217;t able to test all platforms: you may find you need to install additional or different libraries to support v3.0.</p>
</div>
<div class="section" id="how-are-you-planning-on-upgrading">
<h3><a class="toc-backref" href="#id3">4.3.1.2. How are you planning on upgrading?</a><a class="headerlink" href="#how-are-you-planning-on-upgrading" title="Permalink to this headline">¶</a></h3>
<p>Ideally, you will do a sandboxed test installation of 3.0 using a snapshot of your existing data before you switch off your existing installation. The rest of the instructions are assuming a sandboxed 3.0 installation.</p>
<div class="section" id="upgrade-by-replicating">
<h4><a class="toc-backref" href="#id4">4.3.1.2.1. Upgrade by replicating</a><a class="headerlink" href="#upgrade-by-replicating" title="Permalink to this headline">¶</a></h4>
<p>If you&#8217;re familiar with replication, and your current installation is 2.4 or
newer, you can set up your existing installation to replicate data to a new
3.0 installation and failover to the new installation when you&#8217;re ready. The
replication protocol has been kept backwards compatible.</p>
<p>If your old installation contains mailboxes or messages that are older than
2.4, they may not have GUID fields in their indexes (index version too old),
or they may have their GUID field set to zero.  3.0 will not accept message
replications without valid matching GUIDs, so you need to fix this on your
old installation first.</p>
<p>You can check for affected mailboxes by examining the output from the
<a class="reference internal" href="../reference/manpages/systemcommands/mbexamine.html#std:cyrusman-mbexamine(8)">mbexamine(8)</a> tool:</p>
<ul class="simple">
<li>mailboxes that report a &#8216;Minor Version:&#8217; less than 10 will need to have
their index upgraded using <a class="reference internal" href="../reference/manpages/systemcommands/reconstruct.html#std:cyrusman-reconstruct(8)">reconstruct(8)</a> with the
<cite>-V &lt;version&gt;</cite> parameter to be at least 10.</li>
<li>mailboxes containing messages that report &#8216;GUID:0&#8217; will need to have
their GUIDs recalculated using <a class="reference internal" href="../reference/manpages/systemcommands/reconstruct.html#std:cyrusman-reconstruct(8)">reconstruct(8)</a> with the <cite>-G</cite>
parameter.</li>
</ul>
<p>If you have a large amount of data, these reconstructs will take a long time,
so it&#8217;s better to identify the mailboxes needing attention and target them
specifically.  But if you have a small amount of data, it might be less work
to just <cite>reconstruct -G -V max</cite> everything.</p>
</div>
<div class="section" id="upgrade-in-place">
<h4><a class="toc-backref" href="#id5">4.3.1.2.2. Upgrade in place</a><a class="headerlink" href="#upgrade-in-place" title="Permalink to this headline">¶</a></h4>
<p>If you are upgrading in place, you will need to shut down Cyrus
entirely while you install the new package.  If your old installation
was using Berkeley DB format databases, you will need to convert or
upgrade the databases <strong>before</strong> you upgrade.  Cyrus v3.0 does not
support Berkeley DB at all.</p>
</div>
</div>
<div class="section" id="do-what-as-who">
<h3><a class="toc-backref" href="#id6">4.3.1.3. Do What As Who?</a><a class="headerlink" href="#do-what-as-who" title="Permalink to this headline">¶</a></h3>
<p>Since the various files, databases, directories, etc. used by Cyrus
must be readable and writable as the <code class="docutils literal"><span class="pre">cyrus</span></code> user, please make sure
to <strong>always</strong> perform Cyrus commands <em>as</em> the <code class="docutils literal"><span class="pre">cyrus</span></code> user, and not
as <code class="docutils literal"><span class="pre">root</span></code>.  In our documentation, we will always reference Cyrus
commands in this form &#8211; <a class="reference internal" href="../reference/manpages/systemcommands/cyr_info.html#std:cyrusman-cyr_info(8)">cyr_info(8)</a> &#8211; before using
examples of them, so you&#8217;ll know that those commands <strong>must</strong> be run as
the <code class="docutils literal"><span class="pre">cyrus</span></code> user.</p>
<p>Doing so in most systems is as simple as using either the <code class="docutils literal"><span class="pre">su</span></code> or
<code class="docutils literal"><span class="pre">sudo</span></code> commands, like so:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">su</span> <span class="n">cyrus</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;/usr/local/bin/cyr_info conf-lint -C /etc/imapd.conf -M /etc/cyrus.conf&quot;</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">cyrus</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">cyr_info</span> <span class="n">conf</span><span class="o">-</span><span class="n">lint</span> <span class="o">-</span><span class="n">C</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">imapd</span><span class="o">.</span><span class="n">conf</span> <span class="o">-</span><span class="n">M</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cyrus</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>In this document, however, there are also several command examples which
<em>should</em> or <strong>must</strong> be run as <code class="docutils literal"><span class="pre">root</span></code>.  These are always standard *nix
commands, such as <code class="docutils literal"><span class="pre">rsync</span></code> or <code class="docutils literal"><span class="pre">scp</span></code>.</p>
<p>We strongly recommend that you read this entire document before upgrading.</p>
</div>
</div>
<div class="section" id="install-new-3-0-cyrus">
<h2><a class="toc-backref" href="#id7">4.3.2. 2. Install new 3.0 Cyrus</a><a class="headerlink" href="#install-new-3-0-cyrus" title="Permalink to this headline">¶</a></h2>
<p>Download the release <a class="reference internal" href="getcyrus.html#getcyrus"><span class="std std-ref">3.0 package tarball</span></a>.</p>
<p>Fetch the libraries for your platform. The full list (including all optional packages) for Debian is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">autoconf</span> <span class="n">automake</span> <span class="n">autotools</span><span class="o">-</span><span class="n">dev</span> <span class="n">bash</span><span class="o">-</span><span class="n">completion</span> <span class="n">bison</span> <span class="n">build</span><span class="o">-</span><span class="n">essential</span> <span class="n">comerr</span><span class="o">-</span><span class="n">dev</span> \
<span class="n">debhelper</span> <span class="n">flex</span> <span class="n">g</span><span class="o">++</span> <span class="n">git</span> <span class="n">gperf</span> <span class="n">groff</span> <span class="n">heimdal</span><span class="o">-</span><span class="n">dev</span> <span class="n">libbsd</span><span class="o">-</span><span class="n">resource</span><span class="o">-</span><span class="n">perl</span> <span class="n">libclone</span><span class="o">-</span><span class="n">perl</span> <span class="n">libconfig</span><span class="o">-</span><span class="n">inifiles</span><span class="o">-</span><span class="n">perl</span> \
<span class="n">libcunit1</span><span class="o">-</span><span class="n">dev</span> <span class="n">libdatetime</span><span class="o">-</span><span class="n">perl</span> <span class="n">libdb</span><span class="o">-</span><span class="n">dev</span> <span class="n">libdigest</span><span class="o">-</span><span class="n">sha</span><span class="o">-</span><span class="n">perl</span> <span class="n">libencode</span><span class="o">-</span><span class="n">imaputf7</span><span class="o">-</span><span class="n">perl</span> <span class="n">libfile</span><span class="o">-</span><span class="n">chdir</span><span class="o">-</span><span class="n">perl</span> \
<span class="n">libglib2</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">dev</span> <span class="n">libical</span><span class="o">-</span><span class="n">dev</span> <span class="n">libio</span><span class="o">-</span><span class="n">socket</span><span class="o">-</span><span class="n">inet6</span><span class="o">-</span><span class="n">perl</span> <span class="n">libio</span><span class="o">-</span><span class="n">stringy</span><span class="o">-</span><span class="n">perl</span> <span class="n">libjansson</span><span class="o">-</span><span class="n">dev</span> <span class="n">libldap2</span><span class="o">-</span><span class="n">dev</span> \
<span class="n">libmysqlclient</span><span class="o">-</span><span class="n">dev</span> <span class="n">libnet</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">perl</span> <span class="n">libnews</span><span class="o">-</span><span class="n">nntpclient</span><span class="o">-</span><span class="n">perl</span> <span class="n">libpam0g</span><span class="o">-</span><span class="n">dev</span> <span class="n">libpcre3</span><span class="o">-</span><span class="n">dev</span> <span class="n">libsasl2</span><span class="o">-</span><span class="n">dev</span> \
<span class="n">libsnmp</span><span class="o">-</span><span class="n">dev</span> <span class="n">libsqlite3</span><span class="o">-</span><span class="n">dev</span> <span class="n">libssl</span><span class="o">-</span><span class="n">dev</span> <span class="n">libtest</span><span class="o">-</span><span class="n">unit</span><span class="o">-</span><span class="n">perl</span> <span class="n">libtool</span> <span class="n">libunix</span><span class="o">-</span><span class="n">syslog</span><span class="o">-</span><span class="n">perl</span> <span class="n">liburi</span><span class="o">-</span><span class="n">perl</span> \
<span class="n">libxapian</span><span class="o">-</span><span class="n">dev</span> <span class="n">libxml</span><span class="o">-</span><span class="n">generator</span><span class="o">-</span><span class="n">perl</span> <span class="n">libxml</span><span class="o">-</span><span class="n">xpath</span><span class="o">-</span><span class="n">perl</span> <span class="n">libxml2</span><span class="o">-</span><span class="n">dev</span> <span class="n">libwrap0</span><span class="o">-</span><span class="n">dev</span> <span class="n">libzephyr</span><span class="o">-</span><span class="n">dev</span> <span class="n">lsb</span><span class="o">-</span><span class="n">base</span> \
<span class="n">net</span><span class="o">-</span><span class="n">tools</span> <span class="n">perl</span> <span class="n">php</span><span class="o">-</span><span class="n">cli</span> <span class="n">php</span><span class="o">-</span><span class="n">curl</span> <span class="n">pkg</span><span class="o">-</span><span class="n">config</span> <span class="n">po</span><span class="o">-</span><span class="n">debconf</span> <span class="n">tcl</span><span class="o">-</span><span class="n">dev</span> \
<span class="n">transfig</span> <span class="n">uuid</span><span class="o">-</span><span class="n">dev</span> <span class="n">vim</span> <span class="n">wamerican</span> <span class="n">wget</span> <span class="n">xutils</span><span class="o">-</span><span class="n">dev</span> <span class="n">zlib1g</span><span class="o">-</span><span class="n">dev</span> <span class="n">sasl2</span><span class="o">-</span><span class="nb">bin</span> <span class="n">rsyslog</span> <span class="n">sudo</span> <span class="n">acl</span> <span class="n">telnet</span>
</pre></div>
</div>
<p>If you&#8217;re on another platform and can provide the list of dependencies, please
let us know via a <a class="reference external" href="https://github.com/cyrusimap/cyrus-imapd/issues">GitHub issue</a> or documentation pull request or send mail to the <a class="reference internal" href="../support/feedback-mailing-lists.html#feedback-mailing-lists"><span class="std std-ref">developer list</span></a>.</p>
<p>Follow the <a class="reference internal" href="../installing.html#installing"><span class="std std-ref">general install instructions</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>It&#8217;s best to ensure your new Cyrus <em>will not</em> start up automatically
if your server restarts in the middle of the upgrade.</p>
<p class="last">How this is best achieved will depend upon your OS and distro, but may involve
something like <code class="docutils literal"><span class="pre">systemctl</span> <span class="pre">disable</span> <span class="pre">cyrus-imapd</span></code> or <code class="docutils literal"><span class="pre">update-rc.d</span> <span class="pre">cyrus-imapd</span> <span class="pre">disable</span></code></p>
</div>
</div>
<div class="section" id="shut-down-existing-cyrus">
<h2><a class="toc-backref" href="#id8">4.3.3. 3. Shut down existing Cyrus</a><a class="headerlink" href="#shut-down-existing-cyrus" title="Permalink to this headline">¶</a></h2>
<p>Shut down your existing Cyrus installation with its init script or
whatever method you normally use.</p>
<p>This is necessary to guarantee a clean data snapshot.</p>
</div>
<div class="section" id="backup-and-copy-existing-data">
<h2><a class="toc-backref" href="#id9">4.3.4. 4. Backup and Copy existing data</a><a class="headerlink" href="#backup-and-copy-existing-data" title="Permalink to this headline">¶</a></h2>
<p>We recommend backing up all your data before continuing.</p>
<ul class="simple">
<li>Sieve scripts</li>
<li>Config files</li>
<li>Mail spool</li>
<li><a class="reference internal" href="../concepts/deployment/databases.html#databases"><span class="std std-ref">Cyrus Databases</span></a></li>
</ul>
<p>(You do already have a backup strategy in place, right? Once you&#8217;re on 3.0, you can
consider using the experimental <a class="reference internal" href="../reference/admin/backups.html#cyrus-backups"><span class="std std-ref">backup tools</span></a>.)</p>
<p>Copy all of this to the new instance, using <code class="docutils literal"><span class="pre">rsync</span></code> or similar tools.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Cyrus keeps its data and databases in various locations, some of
which may be tailored by your configuration.  Please consult
<a class="reference internal" href="../reference/admin/locations.html#imap-admin-locations"><span class="std std-ref">File &amp; Directory Locations</span></a> for guidance on where data lives in your
current installation.</p>
</div>
<p>For example, to copy from an existing Debian or Ubuntu installation
using their standard locations, you might execute this series of
commands on the <em>new</em> server (where &#8220;oldimap&#8221; is the name of the old
server):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">rsync</span> <span class="o">-</span><span class="n">aHv</span> <span class="n">oldimap</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cyrus</span><span class="o">/.</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">cyrus</span><span class="o">/.</span>
<span class="n">rsync</span> <span class="o">-</span><span class="n">aHv</span> <span class="n">oldimap</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">spool</span><span class="o">/</span><span class="n">cyrus</span><span class="o">/.</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">spool</span><span class="o">/</span><span class="n">cyrus</span><span class="o">/.</span>
</pre></div>
</div>
<p>You don&#8217;t need to copy the following databases as Cyrus 3.0 will
recreate these for you automatically:</p>
<ul class="simple">
<li>duplicate delivery (deliver.db),</li>
<li>TLS cache (tls_sessions.db),</li>
<li>PTS cache (ptscache.db),</li>
<li>STATUS cache (statuscache.db).</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may wish to consider relocating these four databases to ephemeral
storage, such as <code class="docutils literal"><span class="pre">/run/cyrus</span></code> (Debian/Ubuntu) or <code class="docutils literal"><span class="pre">/var/run/cyrus</span></code>
or whatever suitable tmpfs is provided on your distro.  It will place
less IO load on your disks and run faster.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please be warned that some packages place tasks such as <code class="docutils literal"><span class="pre">tlsprune</span></code>
(<a class="reference internal" href="../reference/manpages/systemcommands/tls_prune.html#std:cyrusman-tls_prune(8)">tls_prune(8)</a>) in the <code class="docutils literal"><span class="pre">START{}</span></code> stanza of
<a class="reference internal" href="../reference/manpages/configs/cyrus.conf.html#std:cyrusman-cyrus.conf(5)">cyrus.conf(5)</a>.  This will cause a startup problem if the
<code class="docutils literal"><span class="pre">tls_sessions_db</span></code> is not present.  The solution to this is to
remove the <code class="docutils literal"><span class="pre">tlsprune</span></code> task from <code class="docutils literal"><span class="pre">START{}</span></code> and schedule it in
<code class="docutils literal"><span class="pre">EVENTS{}</span></code>, further down.</p>
</div>
</div>
<div class="section" id="copy-config-files-and-update">
<h2><a class="toc-backref" href="#id10">4.3.5. 5. Copy config files and update</a><a class="headerlink" href="#copy-config-files-and-update" title="Permalink to this headline">¶</a></h2>
<p>Again, check the locations on your specific installation.  For example,
on FreeBSD systems, the configuration files <a class="reference internal" href="../reference/manpages/configs/imapd.conf.html#std:cyrusman-imapd.conf(5)">imapd.conf(5)</a>
and <a class="reference internal" href="../reference/manpages/configs/cyrus.conf.html#std:cyrusman-cyrus.conf(5)">cyrus.conf(5)</a> are in <code class="docutils literal"><span class="pre">/usr/local/etc</span></code>, rather than
<code class="docutils literal"><span class="pre">/etc/</span></code>.  Run this command on the <em>old</em> server:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cyrus</span><span class="o">.</span><span class="n">conf</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">imapd</span><span class="o">.</span><span class="n">conf</span> <span class="n">newimap</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span>
</pre></div>
</div>
<p>Using the <a class="reference internal" href="../reference/manpages/systemcommands/cyr_info.html#std:cyrusman-cyr_info(8)">cyr_info(8)</a> command, check to see if your
imapd.conf file contains any deprecated options. Run this command on
the new server:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cyr_info</span> <span class="n">conf</span><span class="o">-</span><span class="n">lint</span> <span class="o">-</span><span class="n">C</span> <span class="o">&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">imapd</span><span class="o">.</span><span class="n">conf</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">M</span> <span class="o">&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">cyrus</span><span class="o">.</span><span class="n">conf</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>You need to provide both imapd.conf and cyrus.conf so that conf-lint knows
the names of all your services and can check service-specific overrides.</p>
<p>To check your entire system&#8217;s configuration you can use the conf-all
action. This command takes all the system defaults, along with anything
you have provided overrides for in your config files:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cyr_info</span> <span class="n">conf</span><span class="o">-</span><span class="nb">all</span> <span class="o">-</span><span class="n">C</span> <span class="o">&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">imapd</span><span class="o">.</span><span class="n">conf</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">M</span> <span class="o">&lt;</span><span class="n">path</span> <span class="n">to</span> <span class="n">cyrus</span><span class="o">.</span><span class="n">conf</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Important config</strong> options: <code class="docutils literal"><span class="pre">unixhierarchysep:</span></code> and <code class="docutils literal"><span class="pre">altnamespace:</span></code>
defaults have changed in <a class="reference internal" href="../reference/manpages/configs/imapd.conf.html#std:cyrusman-imapd.conf(5)">imapd.conf(5)</a>. Implications are
outlined in the Note in <a class="reference internal" href="../concepts/features/namespaces.html#imap-admin-namespaces-mode"><span class="std std-ref">User Namespace Mode</span></a> and
<a class="reference internal" href="../reference/admin/sop/altnamespace.html#imap-switching-alt-namespace-mode"><span class="std std-ref">Switching the Alternative Namespace</span></a>.  Please also see &#8220;Sieve Scripts,&#8221;
below.</p>
<ul class="simple">
<li>unixhierarchysep: on</li>
<li>altnamespace: on</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If your installation is using groups, don&#8217;t turn <code class="docutils literal"><span class="pre">reverseacls:</span></code> on. Reverseacl support
only works well for sites without groups.</p>
</div>
<p>In <a class="reference internal" href="../reference/manpages/configs/cyrus.conf.html#std:cyrusman-cyrus.conf(5)">cyrus.conf(5)</a> move idled from the START section to the
DAEMON section.</p>
</div>
<div class="section" id="upgrade-specific-items">
<h2><a class="toc-backref" href="#id11">4.3.6. 6. Upgrade specific items</a><a class="headerlink" href="#upgrade-specific-items" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Special-Use flags</p>
<blockquote>
<div><p>If your 2.4 <a class="reference internal" href="../reference/manpages/configs/imapd.conf.html#std:cyrusman-imapd.conf(5)">imapd.conf(5)</a> made use of the <code class="docutils literal"><span class="pre">xlist-XX</span></code>
directive(s), you can convert these to per-user special-use annotations
in your new install with the <a class="reference internal" href="../reference/manpages/systemcommands/cvt_xlist_specialuse.html#std:cyrusman-cvt_xlist_specialuse(8)">cvt_xlist_specialuse(8)</a> tool</p>
</div></blockquote>
</li>
<li><p class="first">Sieve Scripts</p>
<blockquote>
<div><p>Since defaults for options: <code class="docutils literal"><span class="pre">unixhierarchysep:</span></code> and
<code class="docutils literal"><span class="pre">altnamespace:</span></code> have changed in <a class="reference internal" href="../reference/manpages/configs/imapd.conf.html#std:cyrusman-imapd.conf(5)">imapd.conf(5)</a>, you
may very likely need to modify any sieve scripts already on your
system.  Fear not, there&#8217;s a tool for this task, called
<a class="reference internal" href="../reference/manpages/systemcommands/translatesieve.html#std:cyrusman-translatesieve(8)">translatesieve(8)</a>.  This tool can handle situations
where either or both of these settings need change. Please consult
the man page for details.</p>
<p>Consider the following example, where the prior configuration was
already using <code class="docutils literal"><span class="pre">altnamespace:</span> <span class="pre">on</span></code>, but was <em>not</em> using
<code class="docutils literal"><span class="pre">unixhierarchysep:</span> <span class="pre">on</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># su cyrus -c &quot;/usr/lib/cyrus/upgrade/translatesieve -a&quot;</span>
<span class="n">you</span> <span class="n">are</span> <span class="n">using</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">imap</span><span class="o">/</span><span class="n">sieve</span> <span class="k">as</span> <span class="n">your</span> <span class="n">sieve</span> <span class="n">directory</span><span class="o">.</span>
<span class="n">translating</span> <span class="n">sievedir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">imap</span><span class="o">/</span><span class="n">sieve</span><span class="o">...</span> <span class="n">converting</span> <span class="n">separator</span> <span class="kn">from</span> <span class="s1">&#39;.&#39;</span> <span class="n">to</span> <span class="s1">&#39;/&#39;</span>
<span class="ow">not</span> <span class="n">changing</span> <span class="n">name</span> <span class="n">space</span><span class="o">.</span>
<span class="n">done</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><strong>Berkeley db format no longer supported</strong></p>
<p>If you have any databases using Berkeley db, they&#8217;ll need to be
converted to skiplist or flat <em>in your existing installation</em>. And
then optionally converted to whatever final format you&#8217;d like in
your 3.0 installation.</p>
<p>Databases potentially affected: mailboxes, annotations, conversations, quotas.</p>
<p>On old install, prior to migration:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cvt_cyrusdb</span> <span class="o">/&lt;</span><span class="n">configdirectory</span><span class="o">&gt;</span><span class="n">mailboxes</span><span class="o">.</span><span class="n">db</span> <span class="n">berkeley</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">new</span><span class="o">-</span><span class="n">mailboxes</span><span class="o">.</span><span class="n">db</span> <span class="n">skiplist</span>
</pre></div>
</div>
<p>If you don&#8217;t want to use flat or skiplist for 3.0, you can use the
new 3.0 <a class="reference internal" href="../reference/manpages/systemcommands/cvt_cyrusdb.html#std:cyrusman-cvt_cyrusdb(8)">cvt_cyrusdb(8)</a> to swap to new format:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">cvt_cyrusdb</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">new</span><span class="o">-</span><span class="n">mailboxes</span><span class="o">.</span><span class="n">db</span> <span class="n">skiplist</span> <span class="o">/&lt;</span><span class="n">configdirectory</span><span class="o">&gt;/</span><span class="n">mailboxes</span><span class="o">.</span><span class="n">db</span> <span class="o">&lt;</span><span class="n">new</span> <span class="n">file</span> <span class="nb">format</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="../reference/manpages/systemcommands/cvt_cyrusdb.html#std:cyrusman-cvt_cyrusdb(8)">cvt_cyrusdb(8)</a> command does not accept relative paths.</p>
</div>
</div>
<div class="section" id="start-new-3-0-cyrus-and-verify">
<h2><a class="toc-backref" href="#id12">4.3.7. 7. Start new 3.0 Cyrus and verify</a><a class="headerlink" href="#start-new-3-0-cyrus-and-verify" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">./</span><span class="n">master</span><span class="o">/</span><span class="n">master</span> <span class="o">-</span><span class="n">d</span>
</pre></div>
</div>
<p>Check <code class="docutils literal"><span class="pre">/var/log/syslog</span></code> for errors so you can quickly understand potential problems.</p>
<p>When you&#8217;re satisfied version 3.0 is running and can see all its data correctly,
start the new Cyrus up with your regular init script.</p>
<p>If something has gone wrong, contact us on the <a class="reference internal" href="../support/feedback-mailing-lists.html#feedback-mailing-lists"><span class="std std-ref">mailing list</span></a>.
You can revert to backups and keep processing mail using your old version
until you&#8217;re able to finish your 3.0 installation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you&#8217;ve disable your system startup scripts, as recommended in
step 2, remember to re-enable them.  Use something like <code class="docutils literal"><span class="pre">systemctl</span>
<span class="pre">enable</span> <span class="pre">cyrus-imapd</span></code> or <code class="docutils literal"><span class="pre">update-rc.d</span> <span class="pre">cyrus-imapd</span> <span class="pre">enable</span></code></p>
</div>
</div>
<div class="section" id="reconstruct-databases-and-cache">
<h2><a class="toc-backref" href="#id13">4.3.8. 8. Reconstruct databases and cache</a><a class="headerlink" href="#reconstruct-databases-and-cache" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Versions of 3.0 prior to 3.0.11 contained a bug (<a class="reference external" href="https://github.com/cyrusimap/cyrus-imapd/issues/2389">Issue #2389</a>) that
could lead to loss of seen state/flags during <cite>reconstruct</cite> for some
messages that already existed prior to Cyrus 2.3.  The <a class="reference internal" href="release-notes/3.0/x/3.0.11.html#relnotes-3-0-11-changes"><span class="std std-ref">3.0.11
release notes</span></a> contain the specifics.</p>
<p class="last">Consider upgrading to 3.0.11 rather than an earlier release.</p>
</div>
<p>The following steps can each take a long time, so we recommend
running them one at a time (to reduce locking contention and high I/O load).</p>
<p>To upgrade all the mailboxes to the latest version. This will take hours, possibly days.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">reconstruct</span> <span class="o">-</span><span class="n">V</span> <span class="nb">max</span>
</pre></div>
</div>
<p>New configuration: if turning on conversations, you need to create conversations.db for each user.
(This is required for jmap).:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ctl_conversationsdb</span> <span class="o">-</span><span class="n">b</span> <span class="o">-</span><span class="n">r</span>
</pre></div>
</div>
<p>To check (and correct) quota usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">quota</span> <span class="o">-</span><span class="n">f</span>
</pre></div>
</div>
<p>If you&#8217;ve been using CalDAV/CardDAV/all of the DAV from earlier releases, then the user.dav
databases need to be reconstructed due to format changes.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dav_reconstruct</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
</div>
<div class="section" id="do-you-want-any-new-features">
<h2><a class="toc-backref" href="#id14">4.3.9. 9. Do you want any new features?</a><a class="headerlink" href="#do-you-want-any-new-features" title="Permalink to this headline">¶</a></h2>
<p>3.0 comes with many lovely new features. Consider which ones you want to enable.
Here are some which may interest you. Check the <a class="reference internal" href="release-notes/3.0/index.html#imap-release-notes-3-0"><span class="std std-ref">3.0 release notes</span></a>
for the full list.</p>
<ul class="simple">
<li><a class="reference internal" href="../developer/jmap.html#developer-jmap"><span class="std std-ref">JMAP</span></a></li>
<li><a class="reference internal" href="../reference/admin/backups.html#cyrus-backups"><span class="std std-ref">Backups</span></a></li>
<li><a class="reference internal" href="../developer/install-xapian.html#imapinstall-xapian"><span class="std std-ref">Xapian for searching</span></a></li>
<li>Cross-domain support. See <code class="docutils literal"><span class="pre">crossdomains</span></code> in <a class="reference internal" href="../reference/manpages/configs/imapd.conf.html#std:cyrusman-imapd.conf(5)">imapd.conf(5)</a></li>
</ul>
</div>
<div class="section" id="upgrade-complete">
<h2><a class="toc-backref" href="#id15">4.3.10. 10. Upgrade complete</a><a class="headerlink" href="#upgrade-complete" title="Permalink to this headline">¶</a></h2>
<p>Your upgrade is complete! We have a super-quick survey (3 questions only,
anonymous responses) we would love for you to fill out, so we can get a feel for
how many Cyrus installations are out there, and how the upgrade process went.</p>
<p><a href="https://cyrusimap.typeform.com/to/YI9P0f" target="_blank">
I'll fill in the survey right now</a> (opens in a new window)</p>
</div>
<div class="section" id="special-note-for-murder-configurations">
<h2><a class="toc-backref" href="#id16">4.3.11. Special note for Murder configurations</a><a class="headerlink" href="#special-note-for-murder-configurations" title="Permalink to this headline">¶</a></h2>
<p>If you upgrade murder frontends before you upgrade all the backends,
they may advertise features to clients which the backends don&#8217;t support,
which will cause the commands to fail when they are proxied to the backend.</p>
<p>Generally accepted wisdom when upgrading a Murder configuration is to
upgrade all your back end servers first. This can be done one at a time.</p>
<p>Upgrade your mupdate master and front ends last.</p>
<p>If you are upgrading from 2.4, and wish to use XFER to transfer your
mailboxes to your new 3.0 server, please consider first upgrading your
2.4 setup to version 2.4.19 or later.  Earlier versions of 2.4 do not
correctly recognise the 2.5 and 3.0 mailbox versions, and will
downgrade mailboxes (losing metadata) in transit.  2.4.19 and later
versions correctly recognise 2.5 and 3.0 servers, and will not
downgrade mailbox versions in transit.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../concepts/deployment.html" class="btn btn-neutral float-right" title="4.4. Configuration Guide" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation/virus.html" class="btn btn-neutral" title="4.2.2.2. Virus Scanner" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1993-2018, The Cyrus Team. Last updated on Aug 05 2019
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9 using a modified <a href="https://readthedocs.org">Read the Docs</a> <a href="https://github.com/snide/sphinx_rtd_theme">theme</a>.

</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'3.1.7 (dev)',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
<!--      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      }); -->
  </script>
  
 



</body>
</html>